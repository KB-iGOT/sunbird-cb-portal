<div class="flex flex-col mt-4">
    <div class="flex flex-row gap-2 mat-subheading-1 cursor-pointer" [routerLink]="['/app/network-v2/home']">
        <div>Go to Network hub</div>
        <mat-icon class="ws-mat-default-text">
            chevron_right
        </mat-icon>
    </div>

    <div class="flex gap-6 network-requests">
        <div class="discussion-card flex-1">
            <div class="flex flex-col gap-4 p-4">
                <div class="mat-subheading-1">Recent requests</div>

                <ng-container *ngIf="recentRequests.loadSkeleton">
                    <div class="flex flex-col gap-3">
                        <div class="flex flex-row gap-2 discussion-card p-3" *ngFor="let i of [1, 2, 3]">
                            <div class="flex justify-center">
                                <ws-widget-skeleton-loader [width]="'40px'" [height]="'40px'"
                                    [bindingClass]="'rounded-full'"></ws-widget-skeleton-loader>
                            </div>
                            <div class="flex-1">
                                <div class="flex flex-col gap-2">
                                    <ws-widget-skeleton-loader [width]="'50%'"
                                        [bindingClass]="'flex rounded-sm h-2'"></ws-widget-skeleton-loader>
                                    <ws-widget-skeleton-loader [width]="'75%'"
                                        [bindingClass]="'flex rounded-sm h-2'"></ws-widget-skeleton-loader>
                                </div>
                            </div>
                            <div class="flex flex-row gap-2 items-center">
                                <ws-widget-skeleton-loader [width]="'24px'" [height]="'24px'" [bindingClass]="'rounded-full'"></ws-widget-skeleton-loader>
                                <ws-widget-skeleton-loader [width]="'24px'" [height]="'24px'" [bindingClass]="'rounded-full'"></ws-widget-skeleton-loader>
                            </div>
                        </div>
                    </div>
                </ng-container>

                <ng-container *ngIf="!recentRequests.loadSkeleton">
                    <ng-container *ngIf="!recentRequests.data || !recentRequests.data.length">
                        <div class="flex flex-col gap-4 items-center p-8">
                            <img src="assets/icons/home/chat.svg" alt="chat img" />
                            <div class="text-center">Built your connections within your department and other departments.</div>
                            <button
                                class="bg-blue-700 text-sm font-semibold text-white py-3 px-5 rounded-full border-none cursor-pointer tracking-wide" [routerLink]="['/app/network-v2']">Find Connections</button>
                        </div>
                    </ng-container>

                    <ng-container *ngIf="recentRequests.data.length">
                        <div class="flex-1 flex-col">
                            <div class="flex flex-row gap-2 items-center py-3 recent-div" *ngFor="let reqData of recentRequests.data | slice:0:3">
                                <ws-widget-avatar-photo [name]="reqData?.fullName" [photoUrl]="''" size="round-m"></ws-widget-avatar-photo>
                                <div class="flex-1 flex-col">
                                    <div class="mat-subheading-1">{{ reqData?.fullName }}</div>
                                    <div class="text-sm">{{ reqData?.departmentName }}</div>
                                </div>
                                <div class="flex flex-row gap-2 justify-center items-center">
                                    <ng-container *ngIf="reqData.connecting">
                                        <div class="flex justify-center items-center">
                                            <mat-icon class="pending">cached</mat-icon>
                                        </div>
                                    </ng-container>

                                    <ng-container *ngIf="!reqData.connecting">
                                        <div class="flex justify-center items-center" (click)="handleRequest(reqData, 'Rejected')">
                                            <mat-icon class="cancel">cancel</mat-icon>
                                        </div>
                                        <div class="flex justify-center items-center" (click)="handleRequest(reqData, 'Approved')">
                                            <mat-icon class="approve">check_circle</mat-icon>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-center items-center p-3">
                            <div class="flex gap-1 font-semibold cursor-pointer ws-mat-default-text" [routerLink]="['/app/network-v2/home']">
                                <div>Show all</div>
                                <mat-icon>
                                    chevron_right
                                </mat-icon>
                            </div>
                        </div>
                    </ng-container>
                </ng-container>


            </div>
        </div>

        <div class="discussion-card flex-1 network-suggestion">
            <div class="flex flex-col gap-6 p-4">
                <div class="mat-subheading-1" *ngIf="suggestionsLoader"> <ws-widget-skeleton-loader [width]="'163px'" [height]="'16px'"
                    [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader></div>
                <div class="mat-subheading-1" *ngIf="!suggestionsLoader">Suggested for you</div>
                <div class="flex flex-row gap-4 justify-center">
                    <!-- loader code -->
                    <ng-container  *ngIf="suggestionsLoader">
                        <div class="card p-4 flex flex-col items-center rounded-xl gap-3 skeleton-background" *ngFor="let item of [1, 2]">
                            <ws-widget-skeleton-loader [width]="'64px'" [height]="'64px'"
                                [bindingClass]="'flex rounded-full h-16 cutting-edge'"></ws-widget-skeleton-loader>
                            <!-- <ws-widget-skeleton-loader [width]="'120px'" [height]="'20px'"
                                [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>
                            <ws-widget-skeleton-loader [width]="'120px'" [height]="'20px'"
                                [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader>                             -->
                        </div>
                        
                    </ng-container>
                    <!-- loader code -->

                    <ng-container *ngIf="!suggestionsLoader">
                        <ng-container *ngIf="networkRecommended.length">
                            <div *ngFor="let recommend of networkRecommended">
                                <div class="card p-4 flex flex-col items-center rounded-xl gap-3 netword-card">
                                    <div class="flex justify-center items-center initial-circle bg-blue-700 text-xl">{{ recommend?.fullName }}</div>
                                    <div class="flex flex-col gap-1">
                                        <div class="font-semibold text-center mat-body-2">{{ recommend?.personalDetails?.firstname }}</div>
                                        <div class="text-center dept-name">{{ recommend?.employmentDetails?.departmentName }}</div>
                                        <div
                                            class="flex flex-row gap-2 ws-mat-default-text font-semibold px-8 py-2 rounded-full mat-body-2 connect-button cursor-pointer text-lg mt-2" (click)="handleConnect(recommend)" *ngIf="!recommend.connecting">
                                            <mat-icon class="ws-mat-default-text">person_add</mat-icon>
                                            Connect
                                        </div>
                                        <div class="flex flex-row gap-2 ws-mat-default-text font-semibold px-8 py-2 rounded-full connect-button cursor-pointer text-lg mt-2 mat-body-2" *ngIf="recommend.connecting">
                                            Connecting...
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>

                        <ng-container *ngIf="!networkRecommended || !networkRecommended.length">
                            <div class="p-4 flex flex-col items-center rounded-xl gap-3">
                                <mat-icon class="no-data-found">report_off</mat-icon>
                                <div class="mat-subheading-1">No data found!</div>
                                <div class="text-center">As of now there are no recommendations found for you.</div>
                            </div>
                        </ng-container>
                    </ng-container>
                </div>
            </div>
            <div class="flex flex-row gap-2 p-4 ws-mat-default-text ws-widget-sliders justify-center" *ngIf="networkRecommended && networkRecommended.length">
                <div class="flex justify-center items-center">
                    <div class="flex gap-1 font-semibold cursor-pointer ws-mat-default-text" [routerLink]="['/app/network-v2/home']">
                        <div *ngIf="!suggestionsLoader">Show all</div>
                        <div *ngIf="suggestionsLoader"><ws-widget-skeleton-loader [width]="'163px'" [height]="'16px'"
                            [bindingClass]="'flex rounded'"></ws-widget-skeleton-loader></div>
                        <mat-icon>
                            chevron_right
                        </mat-icon>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</div>