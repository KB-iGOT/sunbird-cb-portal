<ng-container>
    <div class="filter-overlay">
        <div class="filter filter-md">
            <ng-container [ngTemplateOutlet]="filter"></ng-container>
        </div>
    </div>
</ng-container>

<ng-template #filter>
    <div class="filter-block">
        <div class="flex-1 filter-header">
            <div class="flex flex-row items-center">
                <div class="flex-1">
                    <div class="label">{{'widgetCbpFilters.filters' | translate}}</div>
                </div>
                <div class="flex items-center justify-center">
                    <mat-icon aria-hidden="true" class="cursor-pointer ws-mat-default-text mat-icon notranslate material-icons mat-icon-no-color" role="img" (click)="hideFilter()" >
                        close
                    </mat-icon>
                </div>
            </div>
        </div>
        <div class="filter-content-container">
            <ng-container *ngIf="showAdditionalFilters">
                <div class="flex-1 filter-content">
                    <mat-accordion>
                        <mat-expansion-panel disableRipple [expanded]="true">
                            <mat-expansion-panel-header class="flex items-center">
                                <mat-panel-title class="text-lg">
                                    {{'widgetCbpFilters.contentType' | translate}}
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                            <div class="flex flex-row category-item" *ngFor="let ctype of primaryCategoryList">
                                <mat-checkbox #checkboxes disableRipple [checked]="ctype?.checked" class="example-margin"
                                    (change)="handleGetFilterType($event, ctype, 'primaryCategory')">{{ translateLabels(ctype?.name, 'competencyList') }}</mat-checkbox>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>
                <div class="spacer"></div>
                <div class="flex-1 filter-content mt-4">
                    <mat-accordion>
                        <mat-expansion-panel disableRipple [expanded]="true">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{'widgetCbpFilters.status' | translate}}
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                            <div class="flex flex-row category-item" *ngFor="let ctype of contentStatus">
                                <mat-checkbox #checkboxes disableRipple class="example-margin" [checked]="ctype?.checked"
                                    (change)="handleGetFilterType($event, ctype, 'status')">{{ translateLabels(ctype?.name, 'competencyList') }}</mat-checkbox>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>
                <div class="spacer"></div>
                <div class="flex-1 filter-content mt-4">
                    <mat-accordion>
                        <mat-expansion-panel disableRipple [expanded]="true">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{'widgetCbpFilters.timeDuration' | translate}}
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                            <div class="flex flex-row">
                                <mat-radio-group aria-label="Select an option">
                                    <ng-container *ngFor="let ctype of timeDuration">
                                        <mat-radio-button class="category-item" (change)="timeDurationFilter(ctype,'timeDuration')" [checked]="ctype.checked" [value]="ctype">{{ translateLabels(ctype?.name, 'competencyList') }}</mat-radio-button>
                                        <br>
                                    </ng-container>
                                </mat-radio-group>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>
                <div class="spacer"></div>
            </ng-container>
            <div class="flex-1 filter-content mt-4">
                <mat-accordion>
                    <mat-expansion-panel disableRipple [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                {{'widgetCbpFilters.competencyArea' | translate}}
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="flex flex-row category-item" *ngFor="let ctype of competencyTypeList">
                            <mat-checkbox #checkboxes disableRipple [checked]="ctype?.checked" class="example-margin"
                                (change)="getCompetencyTheme($event, ctype)">{{ translateLabels(ctype?.name, 'competencyList') }}</mat-checkbox>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>

            <div class="spacer" *ngIf="competencyThemeList.length"></div>
            <div class="flex-1 filter-content mt-4" *ngIf="competencyThemeList.length">
                <mat-accordion>
                    <mat-expansion-panel disableRipple [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                {{'widgetCbpFilters.competencyTheme' | translate}}
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="search-container">
                            <div class="rsearch">
                                <mat-icon class="color-60 search-icon mat-icon notranslate material-icons mat-icon-no-color">
                                    search
                                </mat-icon>
                                <input #searchInput id="searchInput" (keyup)="onCompetencyTheme($event)" class="sinput color-60" label=""
                                placeholder="{{'widgetCbpFilters.enterCompetencyTheme' | translate}}" type="Standard" />
                            </div>
                        </div>
                        <div class="category-content">
                            <div class="flex flex-row category-item" *ngFor="let ctitem of competencyThemeList | filterSearch: searchInput.value">
                                <mat-checkbox #checkboxes [checked]="ctitem?.checked" disableRipple class="example-margin"
                                    (change)="getCompetencySubTheme($event, ctitem)">{{ctitem?.name}}</mat-checkbox>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="spacer" *ngIf="competencySubThemeList.length"></div>
            <div class="flex-1 filter-content mt-4" *ngIf="competencySubThemeList.length">
                <mat-accordion>
                    <mat-expansion-panel disableRipple [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                {{'widgetCbpFilters.competencySubTheme' | translate}}
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="search-container">
                            <div class="rsearch">
                                <mat-icon class="color-60 search-icon mat-icon notranslate material-icons mat-icon-no-color">
                                    search
                                </mat-icon>
                                <input #searchThemeInput class="sinput color-60" (keyup)="onCompetencySubTheme($event)"
                                    label="" placeholder="{{'widgetCbpFilters.enterCompetencySubTheme' | translate}}" type="Standard" />
                            </div>
                        </div>
                        <div class="category-content">
                            <div class="flex flex-row category-item"
                                *ngFor="let cstitem of competencySubThemeList | filterSearch: searchThemeInput.value">
                                <mat-checkbox #checkboxes disableRipple class="example-margin" [checked]="cstitem?.checked"
                                    (change)="manageCompetencySubTheme($event, cstitem)">{{cstitem?.name}}</mat-checkbox>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <ng-container *ngIf="showAdditionalFilters">
                <div class="spacer"></div>
                <div class="flex-1 filter-content mt-4">
                    <mat-accordion>
                        <mat-expansion-panel disableRipple [expanded]="true">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{'widgetCbpFilters.provider' | translate}}
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                            <div class="category-content">
                                <div class="flex flex-row category-item" *ngFor="let item of providersList">
                                    <mat-checkbox #checkboxes disableRipple class="example-margin" [checked]="item?.checked"
                                        (change)="handleGetFilterType($event, item?.name,'providers')">{{item?.name}}</mat-checkbox>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>
            </ng-container>
        </div>
        <div class="filter-footer">
            <div class="flex flex-row gap-4 p-6">
                <div class="flex-1">
                    <button class="filter-clear" (click)="clearFilter()">
                        {{'widgetCbpFilters.clear' | translate}}
                    </button>
                </div>
                <div class="flex-1">
                    <button class="filter-apply"  [ngClass]="{'grey-filter': filterEmpty}"  (click)="handleApplyFilter()">
                        {{'widgetCbpFilters.apply' | translate}}
                    </button>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<!--   Filter html for new Integrations -->
<!-- <div class="filter-overlay">
    <div class="filter">
        <div class="filter-header flex flex-1">
            <div class="flex flex-2 flex-row">
                <div class="label">Filters</div>
                <div class="cross-filter cursor-pointer" (click)="hideFilter()">
                    <img src="assets/icons/close.svg" />
                </div>
            </div>
        </div>
        <div class="filter-content-container" *ngIf="from === 'content'">
            <div class="filter-content flex flex-1">
                <mat-accordion>
                    <mat-expansion-panel disableRipple [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Competency Area
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="flex flex-1 flex-row category-item" *ngFor="let ctype of competencyTypeList">
                            <mat-checkbox #checkboxes disableRipple class="example-margin" (change)="getCompetencyTheme($event, ctype)">{{ctype?.name}}</mat-checkbox>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="spacer" *ngIf="competencyThemeList.length"></div>
            <div class="filter-content flex flex-1" *ngIf="competencyThemeList.length">
                <mat-accordion>
                    <mat-expansion-panel disableRipple [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Competency Theme
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="search-container">
                            <div class="rsearch"><mat-icon
                                class="color-60 search-icon mat-icon notranslate material-icons mat-icon-no-color">search</mat-icon>
                            <input #searchInput class="sinput color-60" label="" [formControl]='searchThemeControl' placeholder="Enter competency theme" type="Standard">
                            </div>
                        </div>
                        <div class="category-content">
                            <div class="flex flex-1 flex-row category-item" *ngFor="let ctitem of competencyThemeList | filterSearch: searchInput.value">
                                <mat-checkbox #checkboxes disableRipple class="example-margin"  (change)="getCompetencySubTheme($event, ctitem)">{{ctitem?.name}}</mat-checkbox>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="spacer"  *ngIf="competencySubThemeList.length"></div>
            <div class="filter-content flex flex-1" *ngIf="competencySubThemeList.length">
                <mat-accordion>
                    <mat-expansion-panel disableRipple [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Competency Sub-Theme
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="search-container">
                            <div class="rsearch"><mat-icon
                                class="color-60 search-icon mat-icon notranslate material-icons mat-icon-no-color">search</mat-icon>
                            <input #searchThemeInput class="sinput color-60" label="" placeholder="Enter competency sub-theme" type="Standard">
                            </div>
                        </div>
                        <div class="category-content">
                            <div class="flex flex-1 flex-row category-item" *ngFor="let cstitem of competencySubThemeList | filterSearch: searchThemeInput.value">
                                <mat-checkbox #checkboxes disableRipple class="example-margin"  (change)="manageCompetencySubTheme($event, cstitem)">{{cstitem?.name}}</mat-checkbox>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="spacer" *ngIf="providersList.length"></div>
            <div class="filter-content flex flex-1" *ngIf="providersList.length">
                <mat-accordion>
                    <mat-expansion-panel disableRipple [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Provider
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="category-content">
                            <div class="flex flex-1 flex-row category-item" *ngFor="let item of providersList">
                                <mat-checkbox #checkboxes disableRipple class="example-margin" (change)="checkedProviders($event, item?.name)">{{item?.name}}</mat-checkbox>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        </div>
        <div class="filter-content-container" *ngIf="from === 'assignee'">
            <div class="filter-content flex flex-1">
                <mat-accordion>
                    <mat-expansion-panel disableRipple [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Groups
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="flex flex-1 flex-row category-item" *ngFor="let group of groupList">
                            <mat-checkbox #checkboxes disableRipple class="example-margin" (change)="manageSelectedGroup($event, group)">{{group?.name}}</mat-checkbox>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div class="filter-content flex flex-1">
                <mat-accordion>
                    <mat-expansion-panel disableRipple [expanded]="true">
                        <mat-expansion-panel-header>
                            <mat-panel-title>
                                Designation
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="flex flex-1 flex-row category-item" *ngFor="let des of designationList">
                            <mat-checkbox #checkboxes disableRipple class="example-margin" (change)="manageSelectedDesignation($event, des)">{{des?.name}}</mat-checkbox>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        </div>
        <div class="filter-footer flex flex-1">
            <div class="flex flex-2 flex-row">
                <div class="filter-clear" (click)="clearFilter()">
                    Clear
                </div>
                <div class="filter-apply" (click)="applyFilter()">
                    Apply
                </div>
            </div>
        </div>
    </div>
</div> -->
