<ng-container *ngIf="content">
   <ng-container *ngIf="isCollection && !isModule">
      <ng-container [ngTemplateOutlet]="collectionTemplate">
      </ng-container>
  </ng-container>
  <ng-container *ngIf="isCollection && isModule">
      <ng-container  *ngIf="content?.offlineResourseCount">
          <ng-container [ngTemplateOutlet]="collectionTemplate">
          </ng-container>
      </ng-container>
  </ng-container>
    <div *ngIf="isResource" class="resource-container mt-4">
       <div class="resource flex flex-wrap sm:flex-col flex-start width-expand w-100  sm:w-auto">
          <a class="w-full" [class.disabled]="(forPreview || !isEnabled) ? true : null"
          (click)="redirectToPage()">
          <div class="text-truncate1 " [ngClass]="{'cursor-pointer': !isEnabled}"
          (click)="viewChildren = !viewChildren; raiseTelemetry();">
          <div class="flex flex-col sm:flex-row flex-wrap">
             <p class="margin-remove text-truncate1 mat-body-2 flex-auto font-bold" [ngClass]="{'text-active': pathSet?.has(content?.identifier)}">
                {{ content?.name }} <span class="margin-left-s"
                [ngClass]="{'offline': session[content?.identifier]?.sessionType.toLowerCase() === 'offline','online':session[content?.identifier]?.sessionType.toLowerCase() !== 'offline'}"> {{session[content?.identifier]?.sessionType || ''}}</span>
             </p>
             <span class="content-type optional-span" *ngIf="content?.optionalReading">optional </span>
             
          </div>
          <div class="mat-body-2 ws-mat-black60-text mt-2">
            <div class="flex flex-1 flex-row">
                <!-- <div class="flex margin-right-s capitalize">{{session[content?.identifier]?.sessionType || ''}}</div> -->
                <div class="flex margin-right-s">{{session[content?.identifier]?.startDate | date: 'MMM d, y' }}</div>
                <div class="flex bullet-span">{{session[content?.identifier]?.sessionDuration || '_'}}
                    <span class="margin-left-s bullet-span">{{session[content?.identifier]?.startTime || '_' }} -
                        {{session[content?.identifier]?.endTime || '_'}}</span>
                </div>
            </div>
        </div>
        <!-- {{ content?.sYS_INTERNAL_LAST_UPDATED_ON | date: 'MMM d, y' }} -->
       </div>
      </a>
      <ng-container *ngIf="batchData?.enrolled">
         <div *ngIf="session[content?.identifier]?.sessionHandouts?.length > 0">
             <p class=" font-bold mat-body-1 margin-bottom-xs  ws-mat-black60-text">{{'apptocsessionscards.sessionHandouts' | translate }}</p>
             <div class="flex flex-col flex-wrapped margin-bottom-s width-expand pr-0 w-100 sm:pr-4 sm:w-auto mb-4">
                 <ng-container *ngFor="let handout of session[content?.identifier]?.sessionHandouts">
                     <div class="">
                         <span class="mr-4">{{handout.title}}</span>
                         <a class="download-link" target=”_blank” download href="{{handout.url}}">{{'apptocsessionscards.download' | translate }}</a>
                     </div>
                 </ng-container>
             </div>
         </div>
     </ng-container>
       <ng-container>
          <ws-widget-attendance-card [session]="session[content?.identifier]" [config]="config"></ws-widget-attendance-card>
       </ng-container>
      
    </div>
    </div>
 </ng-container>

 <ng-template #collectionTemplate>
   <ng-container *ngIf="isCollection">
      <ng-container  *ngIf="isModule">
         <div class="collection-wrapper  flex flex-col position-relative" 
            [ngClass]="{'open': viewChildren, 'close': !viewChildren, 'course':!isModule, ' module': isModule}">
            <div class="card-collection w-auto sm:w-100 padding-right-xl">
               <div class="flex flex-col flex-wrap flex-between width-expand pr-0 w-100 sm:pr-4 sm:w-auto" >
                  <div class="text-truncate1" [ngClass]="{'cursor-pointer': !isEnabled}"
                  (click)="viewChildren = !viewChildren">
                  <div class="flex flex-col sm:flex-row flex-wrap">
                     <ng-container *ngFor="let sType of sessionType">
                        <span class="flex" class="margin-right-s" [ngClass]="sType ==='offline' ? 'offline':'online'">
                           {{sType | titlecase}}
                        </span>

                     </ng-container>
                       
                       
                   </div>
                  <div class="flex flex-col sm:flex-row flex-wrap mt-2">
                     <p class="margin-remove text-truncate1 mat-body-1 flex-auto font-bold">
                        {{index}}. {{ content?.name }}
                     </p>
                  </div>
               </div>
               <div class="see-all-container">
                  <a href="javascript:void(0)" role="button" (click)="viewChildren = !viewChildren"
                     class="margin-left-m see-all-btn tab custom-chevron customicon" mat-button>
                     <mat-icon *ngIf="!viewChildren && !isModule">keyboard_arrow_down</mat-icon>
                     <mat-icon *ngIf="viewChildren && !isModule">keyboard_arrow_up</mat-icon>
                     <mat-icon *ngIf="!viewChildren && isModule">arrow_drop_down</mat-icon>
                     <mat-icon *ngIf="viewChildren && isModule">arrow_drop_up</mat-icon>
                  </a>
               </div>
            </div>
         </div>
         </div>
      </ng-container>
      <ng-container *ngIf="batchData?.enrolled">
         <div *ngIf="content?.sessionHandouts?.length > 0">
             <p class=" font-bold mat-body-1 margin-bottom-xs  ws-mat-black60-text">{{'apptocsessionscards.sessionHandouts' | translate }}</p>
             <div class="flex flex-col flex-wrapped margin-bottom-s width-expand pr-0 w-100 sm:pr-4 sm:w-auto mb-4">
                 <ng-container *ngFor="let handout of content?.sessionHandouts">
                     <div class="">
                         <span class="mr-4">{{handout.title}}</span>
                         <a class="download-link" target=”_blank” download href="{{handout.url}}">{{'apptocsessionscards.download' | translate }}</a>
                     </div>
                 </ng-container>
             </div>
         </div>
     </ng-container>
      <div class="child-wrapper  " [ngClass]="{'open': viewChildren, 'close': !viewChildren}" *ngIf="viewChildren"
      [@panelInOut]>
           <div class="children-container" [ngClass]="{'module': isModule, '': !isModule}">
               <ws-widget-app-toc-session-card-new [forPreview]="forPreview"  [pathSet]="pathSet"  [content]="child" [index]="j+1" [expandAll]="expandAll" [rootId]="rootId" [batchId]="batchId" [rootContentType]="rootContentType" [batchData]="batchData" [config]="config"
               [sessionType]="sessionType"
               [session]="session" *ngFor="let child of content?.children; trackBy: contentTrackBy; let j= index;let isFirst = first"
               [ngClass]="{'moduleCard': true, 'first': isFirst}"></ws-widget-app-toc-session-card-new>
           </div>
      </div>
   </ng-container>
 </ng-template>