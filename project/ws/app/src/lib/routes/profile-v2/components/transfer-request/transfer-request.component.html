<div class="flex flex-col gap-4">
    <div class="text-base font-semibold text-center">{{ 'profileInfo.transferHeader' | translate }}</div>

    <form class="flex flex-col gap-4" [formGroup]="transferRequestForm">
        <div class="flex flex-col">
            <div class="text-sm font-bold required">{{ 'profileInfo.organization' | translate }}</div>
            <mat-form-field class="profile-form-field mat-drop-down-select">
                <!-- <mat-select formControlName="organization">
                    <span class="search-box-span">
                        <input (keyup)="searchOrg($event.target.value)" class="dept-seach-input" placeholder="Search organization">
                    </span>
                    
                    <mat-option value="" disabled>{{ 'profileInfo.chooseOrganization' | translate }}</mat-option>
                    <mat-option *ngFor="let dept of departmentData" value="{{ dept }}">{{ dept }}</mat-option>
                </mat-select> -->
                <div class="flex flex-row auto-complete-row" (click)="assignValue()">
                    <input type="text" class="input-text" matInput formControlName="organization"
                        [matAutocomplete]="departmentAuto">
                    <mat-icon>arrow_drop_down</mat-icon>
                </div>
                <mat-autocomplete class="mat-autocomplete" #departmentAuto="matAutocomplete">
                    <mat-option *ngFor="let dept of deptFilterData" value="{{ dept }}">{{ dept }}</mat-option>    
                </mat-autocomplete>
                <mat-error *ngIf="transferRequestForm.controls['organization'].invalid && transferRequestForm.controls['organization'].touched"
                class="mat-error">
                    Please enter a valid organization.  
                  </mat-error>
            </mat-form-field>   
        </div>

    
        <ng-container *ngIf="otherDetails">
            <div class="flex flex-col">
                <div class="text-sm font-bold required">{{ 'profileInfo.group' | translate }}</div>
                <mat-form-field class="profile-form-field mat-drop-down-select">
                    <mat-select formControlName="group">
                        <mat-option value="" disabled>{{ 'profileInfo.chooseAGroup' | translate }}</mat-option>
                        <mat-option *ngFor="let group of data?.groupData" value="{{group}}">{{ group }}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        
            <div class="flex flex-col">
                <div class="text-sm font-bold required">{{ 'profileInfo.designation' | translate }}</div>
                <mat-form-field class="profile-form-field">
                    <!-- <mat-select formControlName="designation">
                        <mat-option value="" disabled>{{ 'profileInfo.chooseADesignation' | translate }}</mat-option>
                        <mat-option *ngFor="let designation of data?.designationsMeta" value="{{ designation?.name }}">{{ designation?.name }}</mat-option>
                    </mat-select> -->
                    <div class="flex flex-row auto-complete-row">
                        <input type="text" class="input-text" matInput formControlName="designation"
                            [matAutocomplete]="designationAuto">
                        <mat-icon>arrow_drop_down</mat-icon>
                    </div>
                    <mat-autocomplete class="mat-autocomplete" #designationAuto="matAutocomplete">
                        <mat-option *ngFor="let designation of designationData" value="{{ designation?.name }}">{{ designation?.name }}</mat-option>
                    </mat-autocomplete>
                    <mat-error *ngIf="transferRequestForm.controls['designation'].invalid && transferRequestForm.controls['designation'].touched"
                        class="mat-error">
                        Please enter a valid designation.
                      </mat-error>
                </mat-form-field>
            </div>
        </ng-container>

        <div class="flex flex-row gap-1 info-div">
            <mat-icon>info</mat-icon>
            <div>{{ 'profileInfo.transferWarnMsg' | translate }}</div>
        </div>
        
        <div class="flex flex-row justify-between mt-2">
            <button class="outline-button" (click)="handleCloseModal()">{{ 'profileInfo.cancel' | translate }}</button>
            <button class="save-button" [disabled]="transferRequestForm?.invalid || 
            isInValidOrgSelection" [ngClass]="{'disable-button': transferRequestForm?.invalid ||
            isInValidOrgSelection}" (click)="handleSubmitRequest()">{{ 'profileInfo.submitRequest' | translate }}</button>
        </div>
    </form>
</div>
