<ng-container *ngIf="!isMobile">
<mat-toolbar [color]="pageNavbar.color" [ngStyle]="pageNavbar?.styles" class="mat-primary cheight viewer-top">
  <div class="flex flex-1">
    <ws-widget-btn-page-back-nav [assessmentStart]="assessmentStart" *ngIf="!isPreview && !needToHide" [widgetData]="{
        url: isTypeOfCollection
          ? collectionType === 'Playlist'
            ? '/app/playlist/me/' + collectionId
            : (forPreview ? '/pulic' : '/app') + '/toc/' + collectionId + '/overview'
          : (forPreview ? '/public' : '/app') + '/toc/' + resourceId + '/overview',
        titles: [],
        queryParams : isTypeOfCollection
        ? collectionType === 'Playlist'
          ? {}
          : {}
        : {primaryCategory: resourcePrimaryCategory}
      }"></ws-widget-btn-page-back-nav> 
    <ws-widget-btn-page-back-nav  [assessmentStart]="assessmentStart" *ngIf="needToHide" [widgetData]="{
        url: '/app/competencies/home',
        titles: []
      }"></ws-widget-btn-page-back-nav>
    <a *ngIf="logo && forPreview" mat-button routerLink="/static-home">
      <img [src]="appIcon" alt="Application Logo" class="app-logo" />
    </a>
    <a *ngIf="logo && !forPreview" mat-button routerLink="/page/home">
      <img [src]="appIcon" alt="Application Logo" class="app-logo" />
    </a>
  </div>
  <div class="flex" *ngIf="isTypeOfCollection">
    <div class="flex flex-1 flex-col  margin-right-l progress-container" *ngIf="collectionId && hierarchyMapData && !loadingOverallPRogress">
      <div class="flex flex-row justify-between w-ful" >
        <div class="flex items-center mb-2">
          <span class="mat-body-2 mr-2">{{'playerbrief.items' | translate}} ({{completedCount}}/{{overallLeafNodes}})</span>
          <mat-icon class="cursor-pointe infoIcon" matTooltip="{{'playerbrief.topProgress' | translate}}">info_outline</mat-icon>
        </div>

       <span class="mat-body-2"> {{overallProgress}}%</span>
      </div>
       <ws-widget-content-progress
         [contentId]="currentDataFromEnrollList?.identifier" [progress]="overallProgress" [progressType]="'percentage'" [customClassName]="'viewer-progress'">
       </ws-widget-content-progress>
    </div>
    <ng-container *ngIf="loadingOverallPRogress">
      <div class="flex flex-1 flex-col  margin-right-l progress-container">
        <div class="flex flex-row justify-between w-full ws-mat-white-text" >
          <div class="flex items-center mb-2" style="width: 100%;">
            <span class="mat-body-2 mr-2" style="width: 40%;">
              <ws-widget-skeleton-loader [width]="'30%'" [height]="'16px'"  [bindingClass]="'rounded mb-2'"></ws-widget-skeleton-loader>
            </span>
          </div>
  
         <span class="mat-body-2  ws-mat-white-text">
           <ws-widget-skeleton-loader [width]="'20px'" [height]="'16px'"  [bindingClass]="'rounded mb-2'"></ws-widget-skeleton-loader>
          </span>
        </div>
  
        <ws-widget-skeleton-loader [width]="'100%'" [height]="'4px'"  [bindingClass]="'rounded mb-2'"></ws-widget-skeleton-loader>
      </div>
    </ng-container>
    <div color="secondary" class="flex mat-body-2 flex-middle font-bold-imp px-2" (click)="openFeedbackDialog()">
      <mat-icon class=" icon-margin mat-icon notranslate material-icons mat-icon-no-color mr-2 blue-color">star</mat-icon>
      <ng-container *ngIf="!userRating">
        <span class="mr-1 blue-color">{{'apptocsinglepage.rateNow' | translate}}</span>
        <!-- <span class="lowercase">

          <ng-container *ngIf="content?.primaryCategory === primaryCategory.PROGRAM">
            {{content?.primaryCategory}}
          </ng-container>
          <ng-container *ngIf="content?.primaryCategory === primaryCategory.COURSE ||
            content.primaryCategory === primaryCategory.MANDATORY_COURSE_GOAL">
            course
          </ng-container>
        </span> -->
      </ng-container>
      <ng-container *ngIf="userRating">
        <span> {{'apptocsinglepage.editRating' | translate}} </span>
      </ng-container>
    </div>
    <div (click)="onClickOfShare()" class="flex flex-row cursor-pointer items-center justify-end gap-2 share-tag margin-left-l">
      <mat-icon class="blue-color">share</mat-icon>
      <span class="blue-color">{{'apptocsinglepage.share' | translate}}</span>
    </div>
  </div>
</mat-toolbar>
</ng-container>

<ng-container *ngIf="isMobile">
  <mat-toolbar [color]="pageNavbar.color" [ngStyle]="pageNavbar?.styles" class="mat-primary cheight viewer-top">   
    <div class="flex justify-around items-end width-100">
      <div class="flex flex-1 flex-col  margin-right-l progress-container">
        <div class="flex flex-row justify-between w-full ws-mat-black-text">
          <div class="flex items-center mb-2">
            <span class="mat-body-2 mr-2">{{'playerbrief.items' | translate}} ({{currentDataFromEnrollList?.progress}}/{{currentDataFromEnrollList?.leafNodesCount}})</span>
            <mat-icon class="cursor-pointer ws-mat-black-text infoIcon" matTooltip="{{'playerbrief.topProgress' | translate}}">info_outline</mat-icon>
          </div>
  
         <span class="mat-body-2  ws-mat-black-text"> {{currentDataFromEnrollList?.completionPercentage}}%</span>
        </div>
  
         <ws-widget-content-progress
           [contentId]="currentDataFromEnrollList?.identifier" [progress]="currentDataFromEnrollList?.completionPercentage" [progressType]="'percentage'" [customClassName]="'viewer-progress'">
         </ws-widget-content-progress>
      </div>
      <div>
        <div color="secondary" class="flex mat-body-2 flex-middle font-bold-imp px-2" (click)="openFeedbackDialog()">
          <mat-icon class=" icon-margin mat-icon notranslate material-icons mat-icon-no-color mr-2 blue-color">star</mat-icon>
          <ng-container *ngIf="!userRating">
            <span class="mr-1 blue-color">{{'apptocsinglepage.rateNow' | translate}}</span>
            <!-- <span class="lowercase">
    
              <ng-container *ngIf="content?.primaryCategory === primaryCategory.PROGRAM">
                {{content?.primaryCategory}}
              </ng-container>
              <ng-container *ngIf="content?.primaryCategory === primaryCategory.COURSE ||
                content.primaryCategory === primaryCategory.MANDATORY_COURSE_GOAL">
                course
              </ng-container>
            </span> -->
          </ng-container>
          <ng-container *ngIf="userRating">
            <span> {{'apptocsinglepage.editRating' | translate}}  </span>
          </ng-container>
        </div>
      </div>     
      <!-- <div (click)="onClickOfShare()" class="flex flex-row cursor-pointer items-center justify-end gap-2 share-tag margin-left-l">
        <mat-icon class="blue-color">share</mat-icon>
      </div> -->
    </div>
  </mat-toolbar>
</ng-container>

<ws-app-share-toc *ngIf="enableShare" [rootOrgId]="rootOrgId" [content]="content" (resetEnableShare)="resetEnableShare($event)"></ws-app-share-toc>